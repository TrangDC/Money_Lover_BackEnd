CREATE TABLE User (
                      user_id INT PRIMARY KEY AUTO_INCREMENT,
                      username VARCHAR(255) NOT NULL,
                      name VARCHAR(255) NOT NULL,
                      password VARCHAR(255) NOT NULL,
                      email VARCHAR(255) NOT NULL
);

CREATE TABLE Role (
                      role_id INT PRIMARY KEY AUTO_INCREMENT,
                      role_name VARCHAR(50) NOT NULL
);


CREATE TABLE User_Role (
                           user_id INT,
                           role_id INT,
                           FOREIGN KEY (user_id) REFERENCES User(user_id),
                           FOREIGN KEY (role_id) REFERENCES Role(role_id),
                           PRIMARY KEY (user_id, role_id)
);

CREATE TABLE Wallet (
                        wallet_id INT PRIMARY KEY AUTO_INCREMENT,
                        user_id INT,
                        wallet_name VARCHAR(255) NOT NULL,
                        balance DECIMAL(18, 2) DEFAULT 0,
                        FOREIGN KEY (user_id) REFERENCES User(user_id)
);

CREATE TABLE Category (
                          category_id INT PRIMARY KEY AUTO_INCREMENT,
                          user_id INT,
                          category_name VARCHAR(255) NOT NULL,
                          type ENUM('Income', 'Expense') NOT NULL,
                          FOREIGN KEY (user_id) REFERENCES User(user_id)
);


CREATE TABLE Expense (
                         expense_id INT PRIMARY KEY AUTO_INCREMENT,
                         wallet_id INT,
                         category_id INT,
                         amount DECIMAL(18, 2) NOT NULL,
                         description TEXT,
                         transaction_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                         FOREIGN KEY (wallet_id) REFERENCES Wallet(wallet_id),
                         FOREIGN KEY (category_id) REFERENCES Category(category_id)
);


CREATE TABLE Income (
                        income_id INT PRIMARY KEY AUTO_INCREMENT,
                        wallet_id INT,
                        category_id INT,
                        amount DECIMAL(18, 2) NOT NULL,
                        description TEXT,
                        transaction_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                        FOREIGN KEY (wallet_id) REFERENCES Wallet(wallet_id),
                        FOREIGN KEY (category_id) REFERENCES Category(category_id)
);

CREATE TABLE Wallet_Category_Map (
                                     wallet_id INT,
                                     category_id INT,
                                     FOREIGN KEY (wallet_id) REFERENCES Wallet(wallet_id),
                                     FOREIGN KEY (category_id) REFERENCES Category(category_id),
                                     PRIMARY KEY (wallet_id, category_id)
);